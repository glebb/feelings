<!doctype html>
<html>
<head>
<title>Data</title>
<script type=text/javascript>
  $SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
</script>
<meta charset="UTF-8">
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style.css') }}" />
</head>
<body>
	<h1>Niko Niko Calendar</h1>
  <canvas id="myCanvas" width="1000" height="400">
  </canvas>  
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.js"></script>
  <script>window.jQuery || document.write('<script src="{{
    url_for('static', filename='jquery.js') }}">\x3C/script>')</script> 
    
    <script type=text/javascript>
      $(function() {
        var c=document.getElementById("myCanvas");
        var ctx=c.getContext("2d");
        
        $.getJSON($SCRIPT_ROOT + '/json_data', function(data) {
          var x = 0;
          $.each(data['data'], function(index, val) {
              //$('body').append('<p>'+val['date']+'</p>');
              var y = 0;
              $.each(val['feelings'], function(index2, val2) {
                if (val2 == "0")
                  ctx.fillStyle="red";
                if (val2 == "1")
                  ctx.fillStyle="yellow";
                else if (val2 == "2")
                  ctx.fillStyle="green";
                ctx.fillRect(x,y,30,30);
                y += 32;
              });
              x += 32;                
          });            
        });
      });
    </script>     
</body>
</html>